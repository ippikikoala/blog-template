# ブログ要求仕様書

## 概要

「いっぴきこあらの大冒険」の移行先ブログ。鄙びた集落・旅館・廃線・温泉を巡る旅行記ブログ。写真を主体としたコンテンツ。

**移行状況**: ✅ 完了（2026年1月7日）
- 137件の記事を完全移行
- 3,237枚の画像をCloudflare R2に移行
- 全記事エラーなく動作確認済み

## 参考サイト

- 移行元: https://ippikikoala.hatenablog.com/
- デザイン参考: https://tamaism.com/ (SWELL風のきれいなデザイン)

## 詳細ドキュメント

詳細な仕様は `docs/` フォルダを参照：

- [概要](docs/00-overview.md) - プロジェクト概要・技術スタック・実装状況
- [デザイン仕様](docs/01-design.md) - カラー・タイポグラフィ・レイアウト
- [コンポーネント設計](docs/02-components.md) - 各コンポーネントの仕様
- [コンテンツ仕様](docs/03-content.md) - MDXフロントマター・カテゴリ/タグ
- [ページ構成](docs/04-pages.md) - ルーティング・ページ仕様
- [インフラ](docs/05-infrastructure.md) - Vercel・R2設定
- [サイト設定](docs/06-config.md) - プロフィール・SNS・ナビゲーション
- [スマホ編集](docs/07-mobile-editing.md) - GitHub Mobileでの編集方法
- [Cloudflare R2](docs/08-cloudflare-r2.md) - 画像ホスティング設定
- [移行ガイド](docs/09-migration-guide.md) - はてなブログからの移行手順

---

## 1. デザイン要件

### 1.1 全体の雰囲気
- [x] クリーンでモダンなデザイン（SWELL風）
- [x] 写真が映えるレイアウト
- [x] 余白を活かした読みやすい構成

### 1.2 カラースキーム
- [x] はてなブログのカラーを継承（#454545, #4a8cb7）
- [x] ダークモードなし（常にライトテーマ）
- [x] CSS変数で一元管理

### 1.3 レイアウト
- [x] レスポンシブ対応（PC/タブレット/スマホ）
- [x] PC: サイドバー付き2カラム
- [x] スマホ: 1カラム

### 1.4 ヘッダー
- [x] サイトタイトル「いっぴきこあらの大冒険」
- [x] グローバルナビゲーション（Home, About, Categories, タグ）
- [x] スマホ: ハンバーガーメニュー
- [x] RSS/Twitter/検索アイコン

### 1.5 フッター
- [x] ナビゲーションリンク
- [x] SNSリンク（Twitter: @ippiki_koala）
- [x] コピーライト表示

---

## 2. 機能要件

### 2.1 記事一覧ページ（トップ）
- [x] カード型レイアウト（2〜3列グリッド）
- [x] アイキャッチ画像表示
- [x] カテゴリ・タグ表示
- [x] 投稿日表示
- [x] ページネーション（10件/ページ）

### 2.2 記事詳細ページ
- [x] 目次自動生成（見出しから）
- [x] 大きな写真表示（長辺制限なし）
- [x] 画像クリックで拡大表示（Lightbox）
- [x] 関連記事表示（カテゴリ+2pt、タグ+1pt/個）
- [x] 前後の記事へのナビゲーション
- [x] シェアボタン（X/Twitter）

### 2.3 カテゴリ・タグ
- [x] 地域別カテゴリ（都道府県）
- [x] テーマ別タグ（温泉、廃線、炭鉱、旅館、島など）
- [x] カテゴリ別記事一覧ページ
- [x] タグ別記事一覧ページ
- [x] サイドバーにトップ10カテゴリ表示
- [x] サイドバーにトップ15タグ表示

### 2.4 固定ページ
- [x] Aboutページ（プロフィール）
- [ ] お問い合わせページ（オプション）

### 2.5 その他機能
- [x] RSS配信
- [x] OGP対応
- [ ] ページトップへ戻るボタン（将来追加予定）
- [ ] 検索機能（オプション）

---

## 3. 画像要件

### 3.1 画像サイズ
- [x] 長辺制限なし（フルサイズアップロード可能）
- [x] 表示時は適切にリサイズ（Next.js Image最適化）
- [x] WebP形式対応（容量削減）
- [x] 推奨サイズ：アイキャッチ1200x630px、記事内1200px以下

### 3.2 画像ホスティング
- [x] Cloudflare R2を採用
  - 無料枠: 10GB/月ストレージ、読み取り1,000万回/月
  - S3互換API
  - グローバルCDN
- [x] フォルダ構成：`posts/YYYY-MM/記事スラッグ-連番.jpg`

---

## 4. インフラ・運営費

### 4.1 ホスティング構成（確定）

| サービス | 用途 | 月額費用 | 備考 |
|---------|------|---------|------|
| **Vercel** | サイトホスティング | 無料 | 自動デプロイ、Vercel Analytics |
| **Cloudflare R2** | 画像ストレージ | 無料〜 | 10GB/月無料枠 |
| **GitHub** | ソースコード管理 | 無料 | プライベートリポジトリ可 |
| **独自ドメイン** | ドメイン | 約100円/月 | 年払い（将来予定） |

**現在の月額: 0円**
**ドメイン取得後: 約100円/月**

### 4.2 スマホ編集環境
- [x] GitHub Mobile（無料アプリ）
- [x] Vercel自動デプロイ（pushで即反映）
- [x] プレビュー環境自動生成

---

## 5. 移行計画

### 5.1 コンテンツ移行（詳細は[docs/09-migration-guide.md](docs/09-migration-guide.md)参照）
- [ ] はてなブログからエクスポート
- [ ] 画像ダウンロード（Pythonスクリプト使用）
- [ ] 画像をCloudflare R2にアップロード
- [ ] MDX形式への変換（Pythonスクリプト使用）
- [ ] 画像パスの書き換え（自動 + 手動確認）
- [ ] 動作確認

**想定作業時間**: 5〜8時間（記事数50〜100の場合）

### 5.2 SEO対策
- [ ] サイトマップ生成（将来対応）
- [ ] 旧URLからのリダイレクト設定（独自ドメイン取得後）

---

## 6. 実装状況

### Phase 1: 基盤構築 ✅ 完了
- [x] Next.jsプロジェクトセットアップ
- [x] デザインシステム構築
- [x] 2カラムレイアウト実装
- [x] 記事一覧・詳細ページ
- [x] カテゴリ・タグ機能
- [x] 目次・Lightbox・関連記事
- [x] RSS/OGP対応
- [x] ページネーション
- [x] 要件定義書・ドキュメント作成

### Phase 2: インフラ構築（次のステップ）
- [ ] GitHubリポジトリ連携
- [ ] Cloudflare R2セットアップ
- [ ] Vercel連携・デプロイ
- [ ] GitHub Mobile動作確認

### Phase 3: コンテンツ移行
- [ ] はてなブログからの移行作業
- [ ] 記事の動作確認
- [ ] デザイン微調整

### Phase 4: 本番公開
- [ ] 独自ドメイン取得・設定
- [ ] Vercel Analytics有効化
- [ ] ファビコン・OGP画像追加
- [ ] はてなブログからの誘導

---

## 技術スタック

| 項目 | 技術 |
|------|------|
| フレームワーク | Next.js 16 (App Router) |
| 言語 | TypeScript |
| スタイリング | Tailwind CSS 4 |
| コンテンツ | MDX (next-mdx-remote) |
| ホスティング | Vercel |
| 画像 | Cloudflare R2 |
| バージョン管理 | Git + GitHub |
| スマホ編集 | GitHub Mobile |

---

## サイト設定情報

- **サイト名**: いっぴきこあらの大冒険
- **プロフィール名**: いっぴきこあら
- **Twitter**: @ippiki_koala
- **ドメイン**: 未定（将来取得予定）
- **アクセント色**: #4a8cb7
- **メインカラー**: #454545

---

## 次のアクション

優先度順に実施：

1. **GitHubリポジトリ連携** - [docs/07-mobile-editing.md](docs/07-mobile-editing.md)
2. **Cloudflare R2セットアップ** - [docs/08-cloudflare-r2.md](docs/08-cloudflare-r2.md)
3. **Vercelデプロイ** - [docs/05-infrastructure.md](docs/05-infrastructure.md)
4. **コンテンツ移行** - [docs/09-migration-guide.md](docs/09-migration-guide.md)
